<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
</head>
<body>            
<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
<button id="fade-btn">淡出</button>
<script type="text/javascript">
	var btn = document.getElementById('fade-btn');
    var obj = document.getElementById('fade-obj');
    obj.style.opacity = 1;
//     function fade() {
//         if(obj.style.opacity > 0)
//         {
//         obj.style.opacity -= 0.1;
//         btn.disabled = true;
//         }else
//         {
//             btn.disabled = false;
//             clearInterval(t);
//         }
//     }    
//     var t;
//     btn.onclick = function() {   
//         clearInterval(t);
//         t = setInterval(fade, 1000);
//     }
        function fade() {
            obj.style.opacity -= 0.01;
            btn.disabled = true;
            if(obj.style.opacity > 0)
            {
                var t =setTimeout(fade,20)
            }else{
                clearTimeout(t);
                btn.disabled = false;
            }
        }
        btn.onclick = fade;       
</script>
</body>
</html>